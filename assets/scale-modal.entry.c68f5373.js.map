{"version":3,"file":"scale-modal.entry.c68f5373.js","sources":["../../node_modules/@telekom/scale-components/dist/esm/scale-modal.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, a as Host, g as getElement } from './index-3408babe.js';\nimport { c as classnames } from './index-713f92a5.js';\nimport { e as emitEvent } from './utils-004d7b05.js';\n\n/**\n * Copy/pasted from https://github.com/andreasbm/focus-trap\n */\n/**\n * Traverses the slots of the open shadowroots and returns all children matching the query.\n * We need to traverse each child-depth one at a time because if an element should be skipped\n * (for example because it is hidden) we need to skip all of it's children. If we use querySelectorAll(\"*\")\n * the information of whether the children is within a hidden parent is lost.\n * @param {ShadowRoot | HTMLElement} root\n * @param skipNode\n * @param isMatch\n * @param {number} maxDepth\n * @param {number} depth\n * @returns {HTMLElement[]}\n */\nfunction queryShadowRoot(root, skipNode, isMatch, maxDepth = 20, depth = 0) {\n  const matches = [];\n  // If the depth is above the max depth, abort the searching here.\n  if (depth >= maxDepth) {\n    return matches;\n  }\n  // Traverses a slot element\n  const traverseSlot = ($slot) => {\n    // Only check nodes that are of the type Node.ELEMENT_NODE\n    // Read more here https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n    const assignedNodes = $slot\n      .assignedNodes()\n      .filter((node) => node.nodeType === 1);\n    if (assignedNodes.length > 0) {\n      const $slotParent = assignedNodes[0].parentElement;\n      return queryShadowRoot($slotParent, skipNode, isMatch, maxDepth, depth + 1);\n    }\n    return [];\n  };\n  // Go through each child and continue the traversing if necessary\n  // Even though the typing says that children can't be undefined, Edge 15 sometimes gives an undefined value.\n  // Therefore we fallback to an empty array if it is undefined.\n  const children = Array.from(root.children || []);\n  for (const $child of children) {\n    // Check if the element and its descendants should be skipped\n    if (skipNode($child)) {\n      // console.log('-- SKIP', $child);\n      continue;\n    }\n    // console.log('$child', $child);\n    // If the element matches we always add it\n    if (isMatch($child)) {\n      matches.push($child);\n    }\n    if ($child.shadowRoot != null) {\n      // If the element has a shadow root we need to traverse it\n      matches.push(...queryShadowRoot($child.shadowRoot, skipNode, isMatch, maxDepth, depth + 1));\n    }\n    else if ($child.tagName === 'SLOT') {\n      // If the child is a slot we need to traverse each assigned node\n      matches.push(...traverseSlot($child));\n    }\n    else {\n      // Traverse the children of the element\n      matches.push(...queryShadowRoot($child, skipNode, isMatch, maxDepth, depth + 1));\n    }\n  }\n  return matches;\n}\n/**\n * Returns whether the element is hidden.\n * @param $elem\n */\nfunction isHidden($elem) {\n  return ($elem.hasAttribute('hidden') ||\n    ($elem.hasAttribute('aria-hidden') &&\n      $elem.getAttribute('aria-hidden') !== 'false') ||\n    // A quick and dirty way to check whether the element is hidden.\n    // For a more fine-grained check we could use \"window.getComputedStyle\" but we don't because of bad performance.\n    // If the element has visibility set to \"hidden\" or \"collapse\", display set to \"none\" or opacity set to \"0\" through CSS\n    // we won't be able to catch it here. We accept it due to the huge performance benefits.\n    $elem.style.display === `none` ||\n    $elem.style.opacity === `0` ||\n    $elem.style.visibility === `hidden` ||\n    $elem.style.visibility === `collapse`);\n  // If offsetParent is null we can assume that the element is hidden\n  // https://stackoverflow.com/questions/306305/what-would-make-offsetparent-null\n  // || $elem.offsetParent == null;\n}\n/**\n * Returns whether the element is disabled.\n * @param $elem\n */\nfunction isDisabled($elem) {\n  return ($elem.hasAttribute('disabled') ||\n    ($elem.hasAttribute('aria-disabled') &&\n      $elem.getAttribute('aria-disabled') !== 'false'));\n}\n/**\n * Determines whether an element is focusable.\n * Read more here: https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus/1600194#1600194\n * Or here: https://stackoverflow.com/questions/18261595/how-to-check-if-a-dom-element-is-focusable\n * @param $elem\n */\nfunction isFocusable($elem) {\n  // Discard elements that are removed from the tab order.\n  if ($elem.getAttribute('tabindex') === '-1' ||\n    isHidden($elem) ||\n    isDisabled($elem)) {\n    return false;\n  }\n  return (\n  // At this point we know that the element can have focus (eg. won't be -1) if the tabindex attribute exists\n  $elem.hasAttribute('tabindex') ||\n    // Anchor tags or area tags with a href set\n    (($elem instanceof HTMLAnchorElement || $elem instanceof HTMLAreaElement) &&\n      $elem.hasAttribute('href')) ||\n    // Form elements which are not disabled\n    $elem instanceof HTMLButtonElement ||\n    $elem instanceof HTMLInputElement ||\n    $elem instanceof HTMLTextAreaElement ||\n    $elem instanceof HTMLSelectElement ||\n    // IFrames\n    $elem instanceof HTMLIFrameElement);\n}\n\n/**\n * @license\n * Scale https://github.com/telekom/scale\n *\n * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/**\n * @see https://www.youtube.com/watch?v=9-6CKCz58A8\n */\nfunction animateTo(element, keyframes, options) {\n  const anim = element.animate(keyframes, Object.assign(Object.assign({}, options), { fill: 'both' }));\n  anim.addEventListener('finish', () => {\n    // @ts-ignore\n    anim.commitStyles();\n    anim.cancel();\n  });\n  return anim;\n}\nconst keyframeDefaults = {\n  easing: 'cubic-bezier(0.390, 0.575, 0.565, 1.000)',\n};\nconst KEYFRAMES = {\n  fadeIn: [\n    Object.assign(Object.assign({ offset: 0 }, keyframeDefaults), { opacity: 0 }),\n    Object.assign(Object.assign({ offset: 1 }, keyframeDefaults), { opacity: 1 }),\n  ],\n  fadeOut: [\n    Object.assign(Object.assign({ offset: 0 }, keyframeDefaults), { opacity: 1 }),\n    Object.assign(Object.assign({ offset: 1 }, keyframeDefaults), { opacity: 0 }),\n  ],\n  fadeInTop: [\n    Object.assign(Object.assign({ offset: 0 }, keyframeDefaults), { opacity: 0, \n      /**\n       * we are not using transform here to avoid breaking positioning for nested fixed elements (i.e. a flyout menu in an animated modal)\n       * see 'fixed' section @link https://developer.mozilla.org/en-US/docs/Web/CSS/position\n       */\n      top: '-3rem' }),\n    Object.assign(Object.assign({ offset: 1 }, keyframeDefaults), { opacity: 1, top: 0 }),\n  ],\n};\n\nconst modalCss = \":host{--spacing-x:var(--telekom-spacing-unit-x4);--background-overlay:var(\\n    --telekom-color-background-backdrop,\\n    rgba(108, 108, 108, 0.7)\\n  );--max-height-window:calc(100vh - (2 * var(--telekom-spacing-unit-x20)));--radius-window:var(--telekom-radius-large);--box-shadow-window:var(--telekom-shadow-top);--background-window:var(--telekom-color-background-surface);--color-window:var(--telekom-color-text-and-icon-standard);--size-window-small:calc(\\n    (6 * var(--telekom-spacing-unit-x14, 3.5rem)) +\\n      (5 * var(--telekom-spacing-unit-x8))\\n  );--size-window-default:calc(\\n    (8 * var(--telekom-spacing-unit-x14, 3.5rem)) +\\n      (7 * var(--telekom-spacing-unit-x8))\\n  );--size-window-large:calc(\\n    (12 * var(--telekom-spacing-unit-x14, 3.5rem)) +\\n      (11 * var(--telekom-spacing-unit-x8))\\n  );--spacing-x-header:var(--telekom-spacing-unit-x6);--spacing-y-header:var(--telekom-spacing-unit-x6);--border-bottom-header-has-scroll:var(--telekom-line-weight-standard) solid\\n    var(--telekom-color-ui-subtle);--font-family-heading:var(--telekom-typography-font-family-sans);--font-size-heading:var(--telekom-typography-font-size-callout);--font-weight-heading:var(--telekom-typography-font-weight-extra-bold);--spacing-close-button:var(--telekom-spacing-unit-x2);--radius-close-button:var(--telekom-radius-standard);--transition-close-button:all var(--telekom-motion-duration-transition)\\n    var(--telekom-motion-easing-standard);--box-shadow-close-button-focus:0 0 0 var(--telekom-line-weight-highlight)\\n    var(--telekom-color-functional-focus);--color-close-button:var(--telekom-color-text-and-icon-standard);--color-close-button-hover:var(--telekom-color-primary-hovered);--color-close-button-active:var(--telekom-color-primary-pressed);--spacing-x-body-wrapper:var(--telekom-spacing-unit-x6);--spacing-y-body:var(--telekom-spacing-unit-x6);--spacing-actions:var(--telekom-spacing-unit-x6);--spacing-x-actions-slotted:var(--telekom-spacing-unit-x2);--background-actions-has-scroll:var(\\n    --telekom-color-background-surface-subtle\\n  )}.modal{top:0;left:0;width:100%;bottom:0;display:none;z-index:100;position:fixed;background:var(--background-overlay);box-sizing:border-box;align-items:center;justify-content:center;padding-left:var(--spacing-x);padding-right:var(--spacing-x)}.modal.modal--is-open{display:flex}.modal__backdrop{top:0;left:0;width:100%;height:100%;z-index:0;position:absolute}.modal__window{width:100%;height:auto;display:flex;z-index:1;position:relative;overflow-y:auto;flex-direction:column;background-color:var(--background-window);color:var(--color-window);max-height:var(--max-height-window);min-height:var(--min-height-window);border-radius:var(--radius-window);box-shadow:var(--box-shadow-window)}.modal__window .modal__body-wrapper{overflow-y:auto;flex-shrink:1;flex-grow:1}.modal--size-small .modal__window{max-width:var(--size-window-small)}.modal--size-default .modal__window{max-width:var(--size-window-default)}.modal--size-large .modal__window{max-width:var(--size-window-large)}@media (max-height: 30em){.modal__window{max-height:calc(100vh - var(--telekom-spacing-unit-x6))}}.modal__window:after{top:0;left:0;width:100%;border:1px solid transparent;height:100%;content:'';display:block;position:absolute;box-sizing:border-box;pointer-events:none;border-radius:var(--radius-window)}.modal__header{display:flex;align-items:flex-start;flex-shrink:0;justify-content:space-between;margin-left:var(--spacing-x-header);margin-right:var(--spacing-x-header);padding-top:var(--spacing-y-header);padding-bottom:var(--spacing-y-header)}.modal--has-scroll .modal__header{border-bottom:var(--border-bottom-header-has-scroll)}.modal__heading{margin:0;font-family:var(--font-family-heading);font-size:var(--font-size-heading);font-weight:var(--font-weight-heading)}.modal__close-button{box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;padding:var(--spacing-close-button);margin-bottom:calc(-2 * var(--spacing-close-button));border:0;border-radius:var(--radius-close-button);outline:none;color:var(--color-close-button);background:transparent;transition:var(--transition-close-button);transform:translate(\\n    var(--spacing-close-button),\\n    calc(-1 * var(--spacing-close-button))\\n  );appearance:none;cursor:pointer;user-select:none}.modal__close-button:focus{box-shadow:var(--box-shadow-close-button-focus)}.modal__close-button:hover{color:var(--color-close-button-hover)}.modal__close-button:active{color:var(--color-close-button-active)}.modal__body-wrapper{padding-left:var(--spacing-x-body-wrapper);padding-right:var(--spacing-x-body-wrapper)}.modal--has-body .modal__body-wrapper{min-height:var(--telekom-spacing-related-lg)}.modal--has-body .modal__body{margin-top:var(--spacing-y-body);margin-bottom:var(--spacing-y-body)}.modal__actions{display:none;flex-shrink:0;justify-content:flex-end;padding:var(--spacing-actions)}.modal__actions ::slotted(*){margin-left:var(--spacing-x-actions-slotted)}.modal--has-actions .modal__actions{display:flex}.modal--align-actions-left .modal__actions{justify-content:flex-start}.modal--has-scroll .modal__actions{background-color:var(--background-actions-has-scroll)}\";\n\nconst supportsResizeObserver = 'ResizeObserver' in window;\nconst Modal = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.scaleOpen = createEvent(this, \"scale-open\", 7);\n    this.scaleOpenLegacy = createEvent(this, \"scaleOpen\", 7);\n    this.scaleBeforeClose = createEvent(this, \"scale-before-close\", 7);\n    this.scaleBeforeCloseLegacy = createEvent(this, \"scaleBeforeClose\", 7);\n    this.scaleClose = createEvent(this, \"scale-close\", 7);\n    this.scaleCloseLegacy = createEvent(this, \"scaleClose\", 7);\n    /** (optional) Modal size */\n    this.size = 'default';\n    /** (optional) If `true`, the Modal is open. */\n    this.opened = false;\n    /** (optional) Transition duration */\n    this.duration = 200;\n    /** (optional) Label for close button */\n    this.closeButtonLabel = 'Close Pop-up';\n    /** (optional) title for close button */\n    this.closeButtonTitle = 'Close';\n    /** (optional) hide close button */\n    this.omitCloseButton = false;\n    /** (optional) Alignment of action buttons */\n    this.alignActions = 'right';\n    /** (optional) allow to inject css style {overflow: hidden} to body when modal is open */\n    this.allowInjectingStyleToBody = false;\n    /** What actually triggers opening/closing the modal */\n    this.isOpen = this.opened || false;\n    /** Check wheter there are actions slots, style accordingly */\n    this.hasActionsSlot = false;\n    /** Check wheter there's content in the body, style accordingly */\n    this.hasBody = false;\n    /** Useful for toggling scroll-specific styles */\n    this.hasScroll = false;\n    /** store document body original overflow style if applicable, this is useful when modal opens and inject overflow style to body */\n    this.bodyOverflowValue = '';\n    this.focusableElements = [];\n    this.handleKeypress = (event) => {\n      if (!this.isOpen) {\n        return;\n      }\n      if (event.key === 'Escape') {\n        this.emitBeforeClose('ESCAPE_KEY');\n      }\n    };\n    this.handleTopFocus = () => {\n      this.attemptFocus(this.getLastFocusableElement());\n    };\n    this.handleBottomFocus = () => {\n      this.attemptFocus(this.getFirstFocusableElement());\n    };\n  }\n  disconnectedCallback() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n  }\n  /**\n   * Set `hasActionsSlot` and `hasBody`.\n   */\n  componentWillRender() {\n    const actionSlots = this.hostElement.querySelectorAll('[slot=\"action\"]');\n    const bodySlot = Array.from(this.hostElement.shadowRoot.querySelectorAll('slot')).find((x) => !x.name);\n    this.hasActionsSlot = actionSlots.length > 0;\n    if (bodySlot != null) {\n      this.hasBody = bodySlot.assignedElements().length > 0;\n    }\n  }\n  emitBeforeClose(trigger) {\n    const emittedEvents = emitEvent(this, 'scaleBeforeClose', { trigger });\n    const prevented = emittedEvents.some((event) => event.defaultPrevented);\n    if (!prevented) {\n      this.opened = false;\n    }\n  }\n  componentDidLoad() {\n    // Query all focusable elements and store them in `focusableElements`.\n    // Needed for the \"focus trap\" functionality.\n    this.focusableElements = queryShadowRoot(this.hostElement.shadowRoot, (el) => isHidden(el) || el.matches('[data-focus-trap-edge]'), isFocusable);\n    // Set `hasScroll` state dynamically on resize.\n    if (supportsResizeObserver) {\n      // @ts-ignore\n      this.resizeObserver = new ResizeObserver(() => {\n        this.setHasScroll();\n      });\n      this.resizeObserver.observe(this.modalBody);\n    }\n    this.setHasScroll();\n  }\n  setHasScroll() {\n    const container = this.modalBody;\n    this.hasScroll = container.scrollHeight > container.clientHeight;\n  }\n  getFirstFocusableElement() {\n    return this.focusableElements[0];\n  }\n  getLastFocusableElement() {\n    return this.focusableElements[this.focusableElements.length - 1];\n  }\n  attemptFocus(element) {\n    if (element == null) {\n      this.closeButton.focus();\n      return;\n    }\n    element.focus();\n  }\n  openedChanged(newValue) {\n    if (newValue === true) {\n      this.open();\n      if (this.allowInjectingStyleToBody) {\n        this.bodyOverflowValue = document.body.style.overflow;\n        // The following style will disable body from scrolling when modal is open\n        document.body.style.setProperty('overflow', 'hidden');\n      }\n    }\n    else {\n      this.close();\n      if (this.allowInjectingStyleToBody) {\n        // remove injected overflow style or set it to original value\n        document.body.style.setProperty('overflow', this.bodyOverflowValue);\n      }\n    }\n  }\n  open() {\n    this.isOpen = true;\n    try {\n      animateTo(this.modalWindow, KEYFRAMES.fadeInTop, {\n        duration: this.duration,\n        delay: this.duration * 0.5,\n      });\n      const anim = animateTo(this.modalContainer, KEYFRAMES.fadeIn, {\n        duration: this.duration,\n      });\n      anim.addEventListener('finish', () => {\n        this.attemptFocus(this.getFirstFocusableElement());\n        emitEvent(this, 'scaleOpen');\n      });\n      this.hostElement.addEventListener('keydown', this.handleKeypress);\n    }\n    catch (err) {\n      emitEvent(this, 'scaleOpen');\n    }\n  }\n  close() {\n    try {\n      const anim = animateTo(this.modalContainer, KEYFRAMES.fadeOut, {\n        duration: this.duration,\n      });\n      anim.addEventListener('finish', () => {\n        this.isOpen = false;\n        emitEvent(this, 'scaleClose');\n      });\n      this.hostElement.removeEventListener('keydown', this.handleKeypress);\n    }\n    catch (err) {\n      this.isOpen = false;\n      emitEvent(this, 'scaleClose');\n    }\n  }\n  render() {\n    return (h(Host, null, this.styles && h(\"style\", null, this.styles), h(\"div\", { ref: (el) => (this.modalContainer = el), class: this.getCssClassMap(), part: classnames('base', this.isOpen && 'open') }, h(\"div\", { class: \"modal__backdrop\", part: \"backdrop\", onClick: () => this.emitBeforeClose('BACKDROP') }), h(\"div\", { \"data-focus-trap-edge\": true, onFocus: this.handleTopFocus, tabindex: \"0\" }), h(\"div\", { class: \"modal__window\", part: classnames('window', this.size && `size-${this.size}`), ref: (el) => (this.modalWindow = el), role: \"dialog\", \"aria-modal\": \"true\", \"aria-label\": this.heading }, h(\"div\", { class: \"modal__header\", part: classnames('header', this.hasScroll && 'has-scroll') }, h(\"h2\", { class: \"modal__heading\", part: \"heading\" }, this.heading), !this.omitCloseButton && (h(\"button\", { ref: (el) => (this.closeButton = el), class: \"modal__close-button\", part: \"close-button\", onClick: () => this.emitBeforeClose('CLOSE_BUTTON'), \"aria-label\": this.closeButtonLabel, title: this.closeButtonTitle }, h(\"slot\", { name: \"close-icon\" }, h(\"scale-icon-action-circle-close\", { decorative: true }))))), h(\"div\", { ref: (el) => (this.modalBody = el), class: \"modal__body-wrapper\", part: classnames('body-wrapper', this.hasBody && 'has-body') }, h(\"div\", { class: \"modal__body\", part: classnames('body', this.hasBody && 'has-body') }, h(\"slot\", null))), h(\"div\", { class: \"modal__actions\", part: classnames('actions', `align-${this.alignActions}`, this.hasActionsSlot && 'has-actions', this.hasScroll && 'has-scroll') }, h(\"slot\", { name: \"action\" }))), h(\"div\", { \"data-focus-trap-edge\": true, onFocus: this.handleBottomFocus, tabindex: \"0\" }))));\n  }\n  getCssClassMap() {\n    return classnames('modal', this.isOpen && 'modal--is-open', this.hasActionsSlot && 'modal--has-actions', `modal--align-actions-${this.alignActions}`, this.hasScroll && 'modal--has-scroll', this.hasBody && 'modal--has-body', this.size && `modal--size-${this.size}`);\n  }\n  get hostElement() { return getElement(this); }\n  static get watchers() { return {\n    \"opened\": [\"openedChanged\"]\n  }; }\n};\nModal.style = modalCss;\n\nexport { Modal as scale_modal };\n"],"names":["queryShadowRoot","root","skipNode","isMatch","maxDepth","depth","matches","traverseSlot","__name","$slot","assignedNodes","node","$slotParent","children","$child","isHidden","$elem","isDisabled","isFocusable","animateTo","element","keyframes","options","anim","keyframeDefaults","KEYFRAMES","modalCss","supportsResizeObserver","Modal","hostRef","registerInstance","createEvent","event","actionSlots","bodySlot","x","trigger","emitEvent","el","container","newValue","h","Host","classnames","getElement"],"mappings":"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"}